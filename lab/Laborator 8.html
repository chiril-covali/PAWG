<!DOCTYPE html>
<html lang="ro">
<head>
  <meta charset="UTF-8">
  <title>Laborator 8</title>
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link rel="stylesheet" href="../styles.css">
  <style>
    .text-input {
      width: 100%;
      max-width: 600px;
      height: 100px;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      resize: vertical;
    }

    .result {
      margin: 15px 0;
      padding: 15px;
      background-color: #f8f9fa;
      border-radius: 4px;
    }

    .phone-number {
      display: inline-block;
      margin: 5px;
      padding: 8px 12px;
      background-color: white;
      border-radius: 4px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .phone-number.moldovan {
      background-color: #e8f5e9;
    }

    .phone-number.foreign {
      background-color: #fff3e0;
    }

    .no-numbers {
      color: #666;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Laborator 8</h1>

    <div class="task">
      <h2>Sarcina 8</h2>
      <p>SÄƒ se scrie un program care va extrage dintr-un text dat toate numerele de telefon cu prefixe strÄƒine (adicÄƒ care nu Ã®ncep cu +373).</p>

      <div class="input-group">
        <textarea id="textInput" class="text-input" placeholder="IntroduceÈ›i textul pentru analizÄƒ (ex: Text cu numere de telefon +373 22 123456, +44 20 7123 4567, etc.)"></textarea>
        <button onclick="extractPhoneNumbers()">Extrage numerele de telefon</button>
      </div>

      <div class="result" id="result">
        Numerele de telefon vor apÄƒrea aici
      </div>
    </div>
  </div>

  <script>
    const countryPrefixes = {
      '1': 'ğŸ‡ºğŸ‡¸', // USA/Canada
      '44': 'ğŸ‡¬ğŸ‡§', // UK
      '33': 'ğŸ‡«ğŸ‡·', // France
      '49': 'ğŸ‡©ğŸ‡ª', // Germany
      '39': 'ğŸ‡®ğŸ‡¹', // Italy
      '34': 'ğŸ‡ªğŸ‡¸', // Spain
      '380': 'ğŸ‡ºğŸ‡¦', // Ukraine
      '7': 'ğŸ‡·ğŸ‡º', // Russia
      '40': 'ğŸ‡·ğŸ‡´', // Romania
      '48': 'ğŸ‡µğŸ‡±', // Poland
      '36': 'ğŸ‡­ğŸ‡º', // Hungary
      '420': 'ğŸ‡¨ğŸ‡¿', // Czech Republic
      '81': 'ğŸ‡¯ğŸ‡µ', // Japan
      '86': 'ğŸ‡¨ğŸ‡³', // China
      '82': 'ğŸ‡°ğŸ‡·', // South Korea
      '91': 'ğŸ‡®ğŸ‡³', // India
      '55': 'ğŸ‡§ğŸ‡·', // Brazil
      '52': 'ğŸ‡²ğŸ‡½', // Mexico
      '61': 'ğŸ‡¦ğŸ‡º', // Australia
      '64': 'ğŸ‡³ğŸ‡¿', // New Zealand
    };

    function getCountryFlag(phoneNumber) {
      const match = phoneNumber.match(/^\+(\d+)/);
      if (!match) return 'ğŸŒ';
      
      const prefix = match[1];
      for (const [code, flag] of Object.entries(countryPrefixes)) {
        if (prefix.startsWith(code)) return flag;
      }
      return 'ğŸŒ';
    }

    function extractPhoneNumbers() {
      const text = document.getElementById('textInput').value;
      const phoneRegex = /\+(?!373\s?)[1-9]\d{1,3}[\s-]?(?:\d[\s-]?){6,14}/g;
      const moldovanRegex = /\+373[\s-]?(?:\d[\s-]?){8}/g;
      
      const foreignNumbers = text.match(phoneRegex) || [];
      const moldovanNumbers = text.match(moldovanRegex) || [];
      
      const resultDiv = document.getElementById('result');
      
      if (foreignNumbers.length === 0 && moldovanNumbers.length === 0) {
        resultDiv.innerHTML = '<div class="no-numbers">Nu au fost gÄƒsite numere de telefon Ã®n text</div>';
        return;
      }
      
      let html = '<div><strong>Numere gÄƒsite:</strong></div>';
      
      // AfiÈ™are numere moldoveneÈ™ti
      moldovanNumbers.forEach(number => {
        html += `<div class="phone-number moldovan">ğŸ‡²ğŸ‡© ${number}</div>`;
      });
      
      // AfiÈ™are numere strÄƒine
      foreignNumbers.forEach(number => {
        const flag = getCountryFlag(number);
        html += `<div class="phone-number foreign">${flag} ${number}</div>`;
      });
      
      resultDiv.innerHTML = html;
    }

    // AdÄƒugare listener pentru procesare la apÄƒsarea tastei Enter
    document.getElementById('textInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter' && !e.shiftKey) {
        e.preventDefault();
        extractPhoneNumbers();
      }
    });
  </script>
</body>
</html>